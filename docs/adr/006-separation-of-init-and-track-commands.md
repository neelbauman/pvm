# 6. Separation of Init and Track Commands

Date: 2026-02-04
Status: Accepted

## Context
これまでの `pvm init` コマンドは、「新規作成」と「既存ファイルの追跡開始」の両方の責務を担っていた。
しかし、ユーザーにとっては「既存のファイルを管理下に追加したいだけなのに `init`（初期化）するのは名前が直感的ではない」という混乱があった。
また、新規ファイル作成時に深い階層のディレクトリを指定するとエラーになる点も不便であった。

## Decision
1. **Command Split**:
    * **`pvm init <file>`**: 新規作成専用とする。テンプレートからファイルを作成し、追跡を開始する。ファイルが既に存在する場合はエラーとする。
    * **`pvm track <file>`** (Alias: `add`): 既存ファイル専用とする。ファイルの追跡を開始する。ファイルが存在しない場合はエラーとする。
2. **Recursive Creation**:
    * `pvm init` 実行時、指定されたパスの親ディレクトリが存在しない場合、自動的に再帰作成 (`mkdir -p`) する。

## Consequences
### Positive
* コマンド名と実際の動作が直感的に一致する（Gitの `init` vs `add` のメンタルモデルに近い）。
* 新しいプロンプトを作成する際、事前に `mkdir` をする手間が省ける。
* 誤って既存ファイルをテンプレートで上書きしてしまう事故を防げる。

### Negative
* 既存ユーザーは `init` で既存ファイルを登録できなくなるため、手順の変更が必要になる（破壊的変更）。

